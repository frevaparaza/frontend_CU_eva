<div class="main-container">
  <div class="sidebar">
    <app-user-list (chatSelected)="openChat($event)"></app-user-list>
  </div>
  <div class="settings-container">
    <div class="chat-banner">
      <button class="back-button-icon" (click)="goBack()">
        <img class="icon-link" src="assets/icons/angle-left.png" alt="<">
      </button>
      <h2>User Settings</h2>
    </div>
    <div *ngIf="user; else loading" class="user-details">
      <div class="profile-img-container">
        <div class="image-edit-overlay" (click)="triggerFileInput()">
          <img class="profile-img" [src]="profileImageUrl || 'assets/icons/user.png'" alt="Profile Image">
          <div class="edit-overlay">
            <span>Edit</span>
          </div>
        </div>
        <input id="profileImage" type="file" (change)="onFileChange($event)" #fileInput style="display: none;">
      </div>
      <form [formGroup]="profileForm" (ngSubmit)="saveProfile()">
        <div class="form-group">
          <label for="username">Username:</label>
          <input id="username" formControlName="username" type="text" required>
        </div>
        <div class="form-group">
          <label for="email">Email:</label>
          <input id="email" formControlName="email" type="email" required>
        </div>
        <button class="auth-button" [disabled]="!profileForm.valid">Save</button>
      </form>
      <button class="auth-button" (click)="deleteUser()">Delete Account</button>
    </div>
    <ng-template #loading><p>Loading...</p></ng-template>
  </div>
</div>
